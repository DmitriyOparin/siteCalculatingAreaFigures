language: java
install: true

jdk:
 - oraclejdk8
branches:
 only:
  - master
script:
 - ./gradlew build --scan -s

before_cache:
 - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
 - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
 directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/

# разворачивание на heroku
deploy:
 provider: heroku
 api_key: 6c856219-4974-4feb-b4c3-41dfd72aad1e
 app: sitecalculatingareafigures

# отправка сообщений о неуспешной сборки проекта
notifications:
 email:
  recipients:
   - www.odo6@yandex.ru
  on_success: never
  on_failure: always